<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.wxy.mapper.SysManagerMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="top.wxy.model.entity.SysManager">
        <id column="id" property="id"/>
        <result column="username" property="username"/>
        <result column="password" property="password"/>
        <result column="phone" property="phone"/>
        <result column="nickname" property="nickname"/>
        <result column="avatar_url" property="avatarUrl"/>
        <result column="tenant_id" property="tenantId"/>
        <result column="role" property="role"/>
        <result column="status" property="status"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>
    
    <select id="getManagerPage" resultType="top.wxy.model.vo.SysManagerVO">
        select * from t_user
        where role in (1, 2)
        <if test="query.username != null and query.username != ''">
            and username like concat('%',#{query.username},'%')
        </if>
        <if test="query.phone != null and query.phone != ''">
            and phone like concat('%',#{query.phone},'%')
        </if>
        <if test="query.nickname != null and query.nickname != ''">
            and nickname like concat('%',#{query.nickname},'%')
        </if>
        <if test="query.tenantId != null">
            and tenant_id = #{query.tenantId}
        </if>
        <if test="query.role != null">
            and role = #{query.role}
        </if>
        <if test="query.status != null">
            and status = #{query.status}
        </if>
        order by create_time desc
    </select>

</mapper>
